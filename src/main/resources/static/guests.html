<!DOCTYPE html>
<html>
<head>
    <title>CRM HOTEL</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <meta charset="utf-8">
    <link rel="stylesheet" href="styles.css">
</head>
<body class = "guestBody">
<h1 class = "guestH1">Список гостей</h1>

<table id="guestTable">
    <thead>
    <tr>
        <th>Id</th>
        <th>Имя</th>
        <th>Фамилия</th>
        <th>Возраст</th>
    </tr>
    </thead>
    <tbody id="guestList"></tbody>
</table>

<script>
    $(document).ready(function() {
        $.ajax({
            url: '/api/guests',
            type: 'GET',
            success: function(data) {
                var guestTable = '';
                data.forEach(function(guest) {
                    guestTable += '<tr><td>' + guest.guestId + '</td><td>' + guest.name + '</td><td>' + guest.surname + '</td><td>' + guest.age + '</td></tr>';
                });
                $('#guestList').html(guestTable);
            },
            error: function() {
                $('#guestList').html('<tr><td colspan="2">Error loading guests</td></tr>');
            }
        });
    });
</script>
</body>
</html>